<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>兼职平台</title>

<include file="./Tpl/bootstrap/public/static.html" />
<style type="text/css">
  .panel-body{position: relative;}
  .my-perinfo{margin-left:26px;}
  .my-perinfo>p>span{margin-right:18px;}
  .my-perimg{border:1px solid #EEE;}
  .my-select-address{}
  .my-select-address>select{width:auto;display: inline-block;}
  .my-personimg{width:200px; cursor: pointer;}
  #swfwrapper{width:630px;}
  div.expire{font:18px/34px ""; height:34px;}

</style>
</head>
<body>
<include file="./Tpl/bootstrap/public/header.html" />
<!--container-->
<div class="container">
  <div class="row">
    <div class="page-header">
        <h1><small>发布新兼职</small></h1>
    </div>
    <div class="col-md-7">
      <form id="jobinfo">
        <div class="form-group">
          <label for="job-name">兼职标题：</label>
          <input class="form-control" name="title" placeholder="兼职标题"/>
        </div>
        <div class="form-group">
          <label for="job-consumer">联系人：</label>
          <input class="form-control" name="leader" placeholder="联系人"/>
        </div>
        <div class="form-group">
          <label for="jobn-tel">联系电话：</label>
          <input class="form-control" name="phone" placeholder="联系电话"/>
        </div>
        <div class="form-group">
          <label for="job-people">需求人数：</label>
          <input class="form-control" name="want_peo" placeholder="需求人数"/>
        </div>
        <div class="form-group">
          <label for="job-address">工作地点：</label>
          <input class="form-control" name="address" placeholder="工作地点"/>
        </div>
        <div class="form-group">
          <label for="job-much">工资范围：</label>
          <input class="form-control" name="money" placeholder="工资范围"/>
        </div>
        <div class="form-group">
          <label for="job-expire">过期时间：</label>
          <div class="row">
            <div class="col-md-4">
            <input class="form-control" name="expire_time" placeholder="过期时间"/>
            </div>
            <div class="col-md-4 expire">天后过期</div>
          </div>
        </div>
        <div class="form-group">
          <label for="job-more">工作介绍：</label>
          <textarea class="form-control" rows="3" name="detail" placeholder="工作介绍"></textarea>
        </div>
        <button type="button" class="btn btn-primary pull-right" id="publish">提交</button>
      </form>
    </div>
    <div class="col-md-1"></div>
    <div class="col-md-4">
      <div class="panel panel-default">
        <div class="panel-heading">关于小蜜蜂</div>
        <div class="panel-body">
          <img src="./__GROUP__/images/erweima.png" class="img-thumbnail center-block" />
        </div>
      </div>
    </div>
  </div>
</div>
<!--./container-->
<!--footer-->
<include file="./Tpl/bootstrap/public/footer.html" />
<!--./footer-->
<script type="text/javascript">
/**
*返回一个对象，将表单中input的name值做属性名，value值做属性值。
*@param String form CSS selector
*@return Object
*/
function getFromInput(form){
  var  input_list = $(form + " input");
  var info = new Object();
  for(var i=0;i<input_list.length;i++){
    info[input_list.eq(i).attr("name")] = input_list.eq(i).val();
  }
  return info;
}

  $("#publish").click(function(){
    //获取数据
    var info = getFromInput("#jobinfo");
    info['detail'] = $("textarea[name='detail']").val();
    console.log(info);
    //ajax
    $.post(
      "{:U('PublishJobs/publish')}",
      info,
      function(data){
        if(data.status){
          alert("发布成功");
          location.href="{:U('PublishJobs/index')}";
        }else{
          alert(data.info);
        }
      }
      );
  });
</script>
</body>
</html>